# ShiftFlow - Employee Shift Management

## Overview
A web-based employee shift management application for scheduling, tracking, and managing employee work shifts. Built with React + Express + PostgreSQL. Features three-tier authentication (Admin/Manager/Employee) with access codes and a Kiosk mode for time tracking.

## Architecture
- **Frontend**: React + TypeScript, Vite, TanStack Query, Wouter routing, Shadcn UI, Tailwind CSS
- **Backend**: Express.js with REST API, express-session for auth
- **Database**: PostgreSQL with Drizzle ORM
- **Auth**: Session-based with bcrypt password hashing, role-based access control
- **Styling**: Tailwind CSS with custom design tokens (primary blue #3B82F6, success green #10B981, accent purple #8B5CF6)

## Project Structure
- `client/src/pages/` - Dashboard, Schedule, Employees, Login, Kiosk pages
- `client/src/components/` - AppSidebar, ShiftFormDialog, EmployeeFormDialog, EmployeeAvatar, AccessCodeDialog, ThemeProvider/Toggle
- `client/src/lib/auth.tsx` - AuthProvider context with login/logout/register hooks
- `client/src/lib/constants.ts` - Colors, departments, roles, utility functions
- `server/auth.ts` - Session setup, auth routes, kiosk routes, access code generation
- `server/routes.ts` - REST API endpoints with role-based middleware
- `server/storage.ts` - DatabaseStorage class with Drizzle ORM
- `server/seed.ts` - Seed data with admin account, 8 employees and ~70 shifts
- `shared/schema.ts` - Drizzle schemas for employees, shifts, accounts, access_codes, time_entries

## Authentication System
- **Admin**: Seeded account (username: admin, password: admin123) with full access
- **Manager**: Created via first-time setup flow when no managers exist
- **Employee**: Uses time-limited access codes generated by managers
- **Access codes**: Format `agencyname-employeename-random16hex`, valid 48 hours, new codes expire old ones
- **Kiosk mode**: No login required, for clock-in/out and break tracking

## API Endpoints
### Auth (no auth required)
- `GET /api/auth/me` - Current session info
- `GET /api/auth/setup-required` - Check if manager setup needed
- `POST /api/auth/login` - Login with username/password
- `POST /api/auth/register-manager` - First-time manager registration
- `POST /api/auth/access-code` - Login with access code
- `POST /api/auth/logout` - Logout

### Protected (requires auth)
- `GET/POST /api/employees` - List/create employees (POST: admin/manager only)
- `GET/PATCH/DELETE /api/employees/:id` - Get/update/delete employee
- `GET/POST /api/shifts` - List/create shifts (POST: admin/manager only)
- `GET/PATCH/DELETE /api/shifts/:id` - Get/update/delete shift

### Access Codes (admin/manager only)
- `POST /api/access-codes/generate` - Generate new access code for employee
- `GET /api/access-codes/:employeeId` - Get code history for employee

### Kiosk (no auth required)
- `GET /api/kiosk/employees` - List active employees (limited fields)
- `POST /api/kiosk/punch` - Record clock-in/out/break-start/break-end
- `GET /api/kiosk/entries/:employeeId` - Get today's time entries
- `GET /api/kiosk/entries` - Get all today's time entries

## Key Features
- Dashboard with stats, today's/tomorrow's schedule, unscheduled employees
- Weekly and monthly calendar views with color-coded shifts
- Employee management with search, CRUD, department/role filters
- Shift assignment with employee selection, time/date, color coding
- Three-tier role-based access control
- Access code generation for employee onboarding
- Kiosk mode for clock-in/out and break tracking
- Dark/light theme toggle
- Responsive sidebar navigation
